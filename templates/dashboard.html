{% extends "base.html" %}

{% block title %}Dashboard - L.A.A.R.I{% endblock %}

{% block content %}
<div class="dashboard-header mb-4">
    <div class="d-flex justify-content-between align-items-center flex-wrap gap-3">
        <div>
            <h1 class="display-6 fw-bold">
                <i class="fas fa-home me-3"></i><span data-i18n="dashboard_title">Dashboard</span> L.A.A.R.I
            </h1>
            <p class="lead text-muted mb-0"><span data-i18n="dashboard_welcome">Bem-vindo ao sistema de gestão arqueológica</span>, {{ current_user.username }}!</p>
        </div>
        <button class="btn btn-archaeological d-flex align-items-center gap-2 px-3 py-2 shadow-sm" 
                type="button" 
                id="teamGalleryBtn"
                data-bs-toggle="modal" 
                data-bs-target="#teamGalleryModal"
                data-i18n-aria="btn_conheca_equipe">
            <i class="fas fa-users"></i>
            <span data-i18n="btn_conheca_equipe">Conheça nossa equipe</span>
        </button>
    </div>
</div>

<!-- Statistics Cards -->
<div class="row g-4 mb-5">
    <div class="col-lg-4 col-md-6">
        <div class="card border-0 shadow-sm h-100">
            <div class="card-body text-center p-4">
                <div class="stat-icon bg-archaeological text-white rounded-circle mx-auto mb-3">
                    <i class="fas fa-archive fa-2x"></i>
                </div>
                <h3 class="h4 fw-bold">{{ stats.artifacts }}</h3>
                <p class="text-muted mb-0" data-i18n="stats_artifacts_cataloged">Artefatos Catalogados</p>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4 col-md-6">
        <div class="card border-0 shadow-sm h-100">
            <div class="card-body text-center p-4">
                <div class="stat-icon bg-archaeological text-white rounded-circle mx-auto mb-3">
                    <i class="fas fa-users fa-2x"></i>
                </div>
                <h3 class="h4 fw-bold">{{ stats.professionals }}</h3>
                <p class="text-muted mb-0" data-i18n="stats_professionals_registered">Profissionais Cadastrados</p>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4 col-md-6">
        <div class="card border-0 shadow-sm h-100">
            <div class="card-body text-center p-4">
                <div class="stat-icon bg-warning text-white rounded-circle mx-auto mb-3">
                    <i class="fas fa-truck fa-2x"></i>
                </div>
                <h3 class="h4 fw-bold">{{ stats.pending_transports }}</h3>
                <p class="text-muted mb-0" data-i18n="stats_pending_transports">Transportes Pendentes</p>
            </div>
        </div>
    </div>
</div>

<!-- Main Modules -->
<div class="modules-grid">
    <h2 class="h3 mb-4" data-i18n="modules_main">Módulos Principais</h2>
    
    <div class="row g-4">
        <div class="col-lg-4 col-md-6">
            <div class="card module-card h-100 border-0 shadow-sm">
                <div class="card-body p-4 text-center">
                    <div class="module-icon bg-archaeological text-white rounded-circle mx-auto mb-3">
                        <i class="fas fa-archive fa-2x"></i>
                    </div>
                    <h4 class="card-title" data-i18n="module_collection">Acervo</h4>
                    <p class="card-text text-muted" data-i18n="module_collection_desc">Consulta organizada de todos os itens catalogados no sistema.</p>
                    <a href="{{ url_for('acervo') }}" class="btn btn-archaeological">
                        <i class="fas fa-arrow-right me-2"></i><span data-i18n="module_collection_btn">Acessar Acervo</span>
                    </a>
                </div>
            </div>
        </div>
        
        <div class="col-lg-4 col-md-6">
            <div class="card module-card h-100 border-0 shadow-sm">
                <div class="card-body p-4 text-center">
                    <div class="module-icon bg-archaeological text-white rounded-circle mx-auto mb-3">
                        <i class="fas fa-tags fa-2x"></i>
                    </div>
                    <h4 class="card-title" data-i18n="module_cataloging">Catalogação</h4>
                    <p class="card-text text-muted" data-i18n="module_cataloging_desc">Sistema completo de registro e catalogação de artefatos.</p>
                    <a href="{{ url_for('catalogacao') }}" class="btn btn-archaeological">
                        <i class="fas fa-arrow-right me-2"></i><span data-i18n="module_cataloging_btn">Gerenciar Catalogação</span>
                    </a>
                </div>
            </div>
        </div>
        
        <div class="col-lg-4 col-md-6">
            <div class="card module-card h-100 border-0 shadow-sm">
                <div class="card-body p-4 text-center">
                    <div class="module-icon bg-archaeological text-white rounded-circle mx-auto mb-3">
                        <i class="fas fa-cube fa-2x"></i>
                    </div>
                    <h4 class="card-title" data-i18n="module_3d_model">Modelo 3D</h4>
                    <p class="card-text text-muted" data-i18n="module_3d_model_desc">Integração com tecnologia de digitalização tridimensional.</p>
                    <a href="{{ url_for('scanner_3d') }}" class="btn btn-archaeological">
                        <i class="fas fa-arrow-right me-2"></i><span data-i18n="module_3d_model_btn">Acessar Modelos</span>
                    </a>
                </div>
            </div>
        </div>
        
        <div class="col-lg-4 col-md-6">
            <div class="card module-card h-100 border-0 shadow-sm">
                <div class="card-body p-4 text-center">
                    <div class="module-icon bg-archaeological text-white rounded-circle mx-auto mb-3">
                        <i class="fas fa-users fa-2x"></i>
                    </div>
                    <h4 class="card-title" data-i18n="module_professionals">Profissionais da Região</h4>
                    <p class="card-text text-muted" data-i18n="module_professionals_desc">Diretório completo de arqueólogos e especialistas.</p>
                    <a href="{{ url_for('profissionais') }}" class="btn btn-archaeological">
                        <i class="fas fa-arrow-right me-2"></i><span data-i18n="module_professionals_btn">Ver Profissionais</span>
                    </a>
                </div>
            </div>
        </div>
        
        <div class="col-lg-4 col-md-6">
            <div class="card module-card h-100 border-0 shadow-sm">
                <div class="card-body p-4 text-center">
                    <div class="module-icon bg-archaeological text-white rounded-circle mx-auto mb-3">
                        <i class="fas fa-clipboard-list fa-2x"></i>
                    </div>
                    <h4 class="card-title" data-i18n="module_inventory">Inventário</h4>
                    <p class="card-text text-muted" data-i18n="module_inventory_desc">Controle detalhado do inventário arqueológico.</p>
                    <a href="{{ url_for('inventario') }}" class="btn btn-archaeological">
                        <i class="fas fa-arrow-right me-2"></i><span data-i18n="module_inventory_btn">Gerenciar Inventário</span>
                    </a>
                </div>
            </div>
        </div>
        
        <div class="col-lg-4 col-md-6">
            <div class="card module-card h-100 border-0 shadow-sm">
                <div class="card-body p-4 text-center">
                    <div class="module-icon bg-archaeological text-white rounded-circle mx-auto mb-3">
                        <i class="fas fa-truck fa-2x"></i>
                    </div>
                    <h4 class="card-title" data-i18n="module_transport">Transporte de Artefatos</h4>
                    <p class="card-text text-muted" data-i18n="module_transport_desc">Controle e rastreamento da movimentação de itens.</p>
                    <a href="{{ url_for('transporte') }}" class="btn btn-archaeological">
                        <i class="fas fa-arrow-right me-2"></i><span data-i18n="module_transport_btn">Controlar Transporte</span>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

{% if current_user.is_admin %}
<div class="admin-section mt-5">
    <div class="alert alert-info border-0">
        <h5 class="alert-heading">
            <i class="fas fa-crown me-2"></i><span data-i18n="admin_panel">Painel Administrativo</span>
        </h5>
        <p class="mb-2" data-i18n="admin_panel_desc">Você possui privilégios de administrador neste sistema.</p>
        <a href="{{ url_for('admin') }}" class="btn btn-sm btn-info">
            <i class="fas fa-cog me-2"></i><span data-i18n="admin_panel_btn">Acessar Administração</span>
        </a>
    </div>
</div>
{% endif %}

<!-- Modal da Galeria da Equipe -->
<div class="modal fade" id="teamGalleryModal" tabindex="-1" aria-labelledby="teamGalleryModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <!-- Cabeçalho do Modal -->
            <div class="modal-header bg-archaeological text-white">
                <div>
                    <h5 class="modal-title" id="teamGalleryModalLabel" data-i18n="galeria_modal_title">Nossa Equipe - Tech Era</h5>
                    <small class="d-block opacity-75" data-i18n="galeria_modal_desc">Conheça os membros da equipe Tech Era e nossos projetos</small>
                </div>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            
            <!-- Corpo do Modal -->
            <div class="modal-body p-4">
                <!-- Seção Descritiva da Tech Era -->
                <div class="team-about-section mb-5">
                    <h4 class="text-archaeological mb-3" data-i18n="team_about_title">Sobre a Tech Era</h4>
                    <p class="lead" data-i18n="team_about_intro">
                        Somos a Tech Era, uma equipe apaixonada por ciência, tecnologia e robótica! 
                        Participamos da FIRST Lego League (FLL), onde aprendemos a usar a criatividade e o trabalho em equipe para transformar ideias em soluções reais.
                    </p>
                    
                    <p class="mb-3" data-i18n="team_core_values_title">
                        Guiados pelos 6 pilares do Core Values, buscamos colocar em prática cada um deles em tudo o que fazemos:
                    </p>
                    
                    <div class="core-values-list">
                        <div class="core-value-item">
                            <span class="cv-icon"><i class="fas fa-lightbulb"></i></span>
                            <span data-i18n="team_cv_discovery">Descoberta: aprendemos algo novo a cada desafio.</span>
                        </div>
                        <div class="core-value-item">
                            <span class="cv-icon"><i class="fas fa-rocket"></i></span>
                            <span data-i18n="team_cv_innovation">Inovação: criamos soluções criativas e originais.</span>
                        </div>
                        <div class="core-value-item">
                            <span class="cv-icon"><i class="fas fa-globe"></i></span>
                            <span data-i18n="team_cv_impact">Impacto: usamos o que sabemos para melhorar o mundo ao nosso redor.</span>
                        </div>
                        <div class="core-value-item">
                            <span class="cv-icon"><i class="fas fa-hands-helping"></i></span>
                            <span data-i18n="team_cv_inclusion">Inclusão: valorizamos cada voz e respeitamos as diferenças.</span>
                        </div>
                        <div class="core-value-item">
                            <span class="cv-icon"><i class="fas fa-users"></i></span>
                            <span data-i18n="team_cv_teamwork">Trabalho em equipe: colaboramos e crescemos juntos.</span>
                        </div>
                        <div class="core-value-item">
                            <span class="cv-icon"><i class="fas fa-smile"></i></span>
                            <span data-i18n="team_cv_fun">Diversão: celebramos cada conquista com alegria e entusiasmo!</span>
                        </div>
                    </div>
                    
                    <p class="lead text-center mt-4 mb-0 text-archaeological fw-bold" data-i18n="team_conclusion">
                        Acreditamos que a verdadeira tecnologia está nas pessoas — e é com união, curiosidade e propósito que a Tech Era constrói o futuro!
                    </p>
                    
                    <hr class="my-4">
                    <h5 class="text-center mb-4" data-i18n="gallery_photos_team">Galeria de Fotos da Equipe</h5>
                </div>
                
                <!-- Área de carregamento -->
                <div id="galleryLoading" class="text-center py-5">
                    <div class="spinner-border text-archaeological" role="status">
                        <span class="visually-hidden" data-i18n="gallery_loading">Carregando...</span>
                    </div>
                    <p class="text-muted mt-3" data-i18n="gallery_loading_text">Carregando galeria...</p>
                </div>
                
                <!-- Grid de fotos -->
                <div id="galleryGrid" class="row g-3 d-none">
                    <!-- As fotos serão carregadas dinamicamente via JavaScript -->
                </div>
                
                <!-- Estado vazio -->
                <div id="galleryEmpty" class="text-center py-5 d-none">
                    <i class="fas fa-images fa-4x text-muted mb-3"></i>
                    <h4 class="text-muted" data-i18n="gallery_no_photos">Nenhuma foto disponível</h4>
                    <p class="text-muted" data-i18n="gallery_empty_text">A galeria está vazia no momento.</p>
                </div>
            </div>
            
            <!-- Rodapé do Modal -->
            <div class="modal-footer border-0 bg-light">
                {% if current_user.is_authenticated and current_user.is_admin %}
                <button type="button" class="btn btn-success me-auto" id="toggleUploadFormBtn">
                    <i class="fas fa-plus me-2"></i><span data-i18n="upload_add_photo">Adicionar Foto</span>
                </button>
                {% endif %}
                <button type="button" class="btn btn-archaeological" data-bs-dismiss="modal">
                    <i class="fas fa-times me-2"></i><span data-i18n="galeria_close">Fechar</span>
                </button>
            </div>
            
            <!-- Formulário de Upload (apenas para admins) -->
            {% if current_user.is_authenticated and current_user.is_admin %}
            <div id="uploadFormContainer" class="border-top bg-white p-4 d-none">
                <h5 class="mb-3"><i class="fas fa-camera me-2"></i><span data-i18n="upload_new_team_photo">Adicionar Nova Foto da Equipe</span></h5>
                <form id="teamPhotoUploadForm" enctype="multipart/form-data">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="photoTitle" class="form-label"><span data-i18n="upload_title_label">Título</span> <span class="text-danger" data-i18n="required_asterisk">*</span></label>
                            <input type="text" class="form-control" id="photoTitle" name="title" required>
                        </div>
                        <div class="col-md-6">
                            <label for="photoImage" class="form-label"><span data-i18n="upload_image_label">Imagem</span> <span class="text-danger" data-i18n="required_asterisk">*</span></label>
                            <input type="file" class="form-control" id="photoImage" name="image" accept="image/jpeg,image/png,image/gif" required>
                        </div>
                        <div class="col-12">
                            <label for="photoDescription" class="form-label" data-i18n="upload_description_label">Descrição (opcional)</label>
                            <textarea class="form-control" id="photoDescription" name="description" rows="2"></textarea>
                        </div>
                        <div class="col-12" id="imagePreviewContainer" style="display: none;">
                            <label class="form-label" data-i18n="upload_preview_label">Preview:</label>
                            <img id="imagePreview" src="" alt="Preview" class="img-thumbnail" style="max-height: 200px;">
                        </div>
                        <div class="col-12">
                            <button type="submit" class="btn btn-success">
                                <i class="fas fa-upload me-2"></i><span data-i18n="upload_submit_btn">Enviar Foto</span>
                            </button>
                            <button type="button" class="btn btn-secondary" id="cancelUploadBtn">
                                <i class="fas fa-times me-2"></i><span data-i18n="upload_cancel_btn">Cancelar</span>
                            </button>
                        </div>
                    </div>
                </form>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<!-- Modal para visualização de foto individual -->
<div class="modal fade" id="photoViewModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content bg-transparent border-0">
            <div class="modal-header border-0">
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-0 text-center">
                <img id="photoViewImage" src="" class="img-fluid rounded" alt="" style="max-height: 85vh; object-fit: contain;">
            </div>
            <div id="photoViewInfo" class="modal-footer border-0 bg-white bg-opacity-90">
                <div class="w-100">
                    <h5 id="photoViewTitle" class="mb-2"></h5>
                    <p id="photoViewDescription" class="text-muted mb-0"></p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Add hover effects to module cards
    document.querySelectorAll('.module-card').forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-5px)';
            this.style.transition = 'transform 0.3s ease';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
        });
    });
</script>

<script>
/**
 * Script para carregar e exibir a galeria da equipe no modal
 * Carrega fotos dinamicamente da API e permite visualização em tela cheia
 * 
 * SISTEMA DE TRADUÇÃO:
 * - Todos os textos estáticos do template usam atributos data-i18n
 * - Elementos criados dinamicamente também recebem data-i18n
 * - Após criar novos elementos, I18n.updatePageContent() é chamado
 * - Traduções disponíveis: PT-BR, EN, ES, FR
 * - Chaves de tradução: gallery_*, upload_*, team_*
 */
(function() {
    'use strict';
    
    // Elementos do DOM
    const teamGalleryModal = document.getElementById('teamGalleryModal');
    const galleryLoading = document.getElementById('galleryLoading');
    const galleryGrid = document.getElementById('galleryGrid');
    const galleryEmpty = document.getElementById('galleryEmpty');
    const photoViewModal = new bootstrap.Modal(document.getElementById('photoViewModal'));
    const photoViewImage = document.getElementById('photoViewImage');
    const photoViewTitle = document.getElementById('photoViewTitle');
    const photoViewDescription = document.getElementById('photoViewDescription');
    
    // Variável para controlar se as fotos já foram carregadas
    let photosLoaded = false;
    
    /**
     * Carrega as fotos da galeria via API
     */
    function loadGalleryPhotos() {
        // Se já carregou, não carrega novamente
        if (photosLoaded) return;
        
        // Mostra loading
        galleryLoading.classList.remove('d-none');
        galleryGrid.classList.add('d-none');
        galleryEmpty.classList.add('d-none');
        
        // Faz requisição para a API
        fetch('{{ url_for("api_gallery_photos") }}')
            .then(response => response.json())
            .then(data => {
                if (data.success && data.photos.length > 0) {
                    renderGalleryPhotos(data.photos);
                    photosLoaded = true;
                } else {
                    showEmptyState();
                }
            })
            .catch(error => {
                console.error('Erro ao carregar fotos da galeria:', error);
                showEmptyState();
            })
            .finally(() => {
                galleryLoading.classList.add('d-none');
            });
    }
    
    /**
     * Renderiza as fotos no grid
     * @param {Array} photos - Array de fotos da API
     */
    function renderGalleryPhotos(photos) {
        galleryGrid.innerHTML = '';
        
        photos.forEach(photo => {
            const photoElement = createPhotoElement(photo);
            galleryGrid.appendChild(photoElement);
        });
        
        galleryGrid.classList.remove('d-none');
        
        // Aplica traduções aos novos elementos
        if (window.I18n) {
            window.I18n.updatePageContent();
        }
    }
    
    /**
     * Cria um elemento de foto para o grid
     * @param {Object} photo - Dados da foto
     * @returns {HTMLElement} - Elemento div da foto
     */
    function createPhotoElement(photo) {
        const col = document.createElement('div');
        col.className = 'col-lg-4 col-md-6';
        
        const imagePath = photo.image_path.startsWith('static/') 
            ? '{{ url_for("static", filename="") }}' + photo.image_path.replace('static/', '')
            : '{{ url_for("static", filename="") }}' + photo.image_path;
        
        col.innerHTML = `
            <div class="gallery-item" data-photo-id="${photo.id}">
                <img src="${imagePath}" alt="${photo.title}" loading="lazy">
                <span class="gallery-badge">
                    <i class="fas fa-users me-1"></i><span data-i18n="gallery_team_badge">Equipe</span>
                </span>
                <div class="gallery-item-overlay">
                    <p class="gallery-item-title">${photo.title}</p>
                </div>
            </div>
        `;
        
        // Adiciona evento de clique para abrir foto em tela cheia
        const galleryItem = col.querySelector('.gallery-item');
        galleryItem.addEventListener('click', () => {
            openPhotoViewer(photo, imagePath);
        });
        
        return col;
    }
    
    /**
     * Abre o modal de visualização de foto
     * @param {Object} photo - Dados da foto
     * @param {String} imagePath - Caminho da imagem
     */
    function openPhotoViewer(photo, imagePath) {
        photoViewImage.src = imagePath;
        photoViewImage.alt = photo.title;
        photoViewTitle.textContent = photo.title;
        photoViewDescription.textContent = photo.description || '';
        
        // Esconde o info se não houver descrição
        const photoViewInfo = document.getElementById('photoViewInfo');
        if (!photo.description) {
            photoViewInfo.classList.add('d-none');
        } else {
            photoViewInfo.classList.remove('d-none');
        }
        
        photoViewModal.show();
    }
    
    /**
     * Mostra o estado vazio (sem fotos)
     */
    function showEmptyState() {
        galleryGrid.classList.add('d-none');
        galleryEmpty.classList.remove('d-none');
    }
    
    /**
     * Evento quando o modal é aberto
     * Carrega as fotos na primeira vez
     */
    if (teamGalleryModal) {
        teamGalleryModal.addEventListener('shown.bs.modal', function() {
            loadGalleryPhotos();
        });
    }
    
    console.log('L.A.A.R.I Dashboard: Sistema de galeria da equipe carregado');
})();

{% if current_user.is_authenticated and current_user.is_admin %}
(function() {
    'use strict';
    
    const toggleUploadFormBtn = document.getElementById('toggleUploadFormBtn');
    const uploadFormContainer = document.getElementById('uploadFormContainer');
    const cancelUploadBtn = document.getElementById('cancelUploadBtn');
    const teamPhotoUploadForm = document.getElementById('teamPhotoUploadForm');
    const photoImageInput = document.getElementById('photoImage');
    const imagePreview = document.getElementById('imagePreview');
    const imagePreviewContainer = document.getElementById('imagePreviewContainer');
    
    toggleUploadFormBtn.addEventListener('click', function() {
        uploadFormContainer.classList.toggle('d-none');
        if (!uploadFormContainer.classList.contains('d-none')) {
            document.getElementById('photoTitle').focus();
        }
    });
    
    cancelUploadBtn.addEventListener('click', function() {
        uploadFormContainer.classList.add('d-none');
        teamPhotoUploadForm.reset();
        imagePreviewContainer.style.display = 'none';
    });
    
    photoImageInput.addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file && file.type.startsWith('image/')) {
            const reader = new FileReader();
            reader.onload = function(e) {
                imagePreview.src = e.target.result;
                imagePreviewContainer.style.display = 'block';
            };
            reader.readAsDataURL(file);
        } else {
            imagePreviewContainer.style.display = 'none';
        }
    });
    
    teamPhotoUploadForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const formData = new FormData(this);
        const submitBtn = this.querySelector('button[type="submit"]');
        const originalBtnText = submitBtn.innerHTML;
        
        const csrfToken = document.querySelector('meta[name="csrf-token"]')?.getAttribute('content');
        
        submitBtn.disabled = true;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Enviando...';
        
        fetch('{{ url_for("upload_team_photo") }}', {
            method: 'POST',
            headers: {
                'X-CSRFToken': csrfToken
            },
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                if (window.LAARI && window.LAARI.showNotification) {
                    window.LAARI.showNotification(data.message, 'success');
                } else {
                    alert(data.message);
                }
                
                teamPhotoUploadForm.reset();
                imagePreviewContainer.style.display = 'none';
                uploadFormContainer.classList.add('d-none');
                
                photosLoaded = false;
                loadGalleryPhotos();
            } else {
                if (window.LAARI && window.LAARI.showNotification) {
                    window.LAARI.showNotification(data.error || 'Erro ao enviar foto.', 'error');
                } else {
                    alert(data.error || 'Erro ao enviar foto.');
                }
            }
        })
        .catch(error => {
            console.error('Erro ao enviar foto:', error);
            if (window.LAARI && window.LAARI.showNotification) {
                window.LAARI.showNotification('Erro ao enviar foto. Tente novamente.', 'error');
            } else {
                alert('Erro ao enviar foto. Tente novamente.');
            }
        })
        .finally(() => {
            submitBtn.disabled = false;
            submitBtn.innerHTML = originalBtnText;
        });
    });
})();
{% endif %}
</script>
{% endblock %}
